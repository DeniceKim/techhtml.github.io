<!DOCTYPE html>
<html lang="ko-KR">
<head>
    <meta charset="utf-8">
    <title>Cross-Origin Resource Sharing</title>
    <style>
        .example { margin-left:1em; padding-left:1em; border-left:double; color:#222; background:#fcfcfc }
        .example code strong { color:inherit; background:#ff0 }
        .note { margin-left:2em; font-weight:bold; font-style:italic; color:green }
        .note pre { font-weight:normal; font-style:normal }
        .warning { margin-left:2em; font-weight:bold; font-style:italic; color:red }
        p.warning::before { content:"Warning: " }
        pre > code, li > code { color:inherit; background:transparent }
        p.note::before { content:"Note: " }
        .XXX { padding:.5em; border:solid #f00 }
        p.XXX::before { content:"Issue: " }
        dl.switch { padding-left:2em }
        dl.switch > dt { text-indent:-1.5em }
        dl.switch > dt:before { content:'\21AA'; padding:0 0.5em 0 0; display:inline-block; width:1em; text-align:right; line-height:0.5em }
        em.ct { text-transform:lowercase; font-variant:small-caps; font-style:normal }
        dfn { font-weight:bold; font-style:normal }
        code { color:orangered; }
        code :link, code :visited { color:inherit }
        hr:not(.top) { display:block; background:none; border:none; padding:0; margin:2em 0; height:auto }
    </style>
    <link href="http://www.w3.org/StyleSheets/TR/W3C-REC" rel="stylesheet">
    <link href="trans.css" rel="stylesheet">
</head>
<body>
<div class="headernotes">
    <p>이 문서는 <a href="https://www.w3.org/TR/cors/">Cross-Origin Resource Sharing</a>의 한국어 번역 문서입니다.<br>
       번역을 진행 중이며 2016년 5월 15일까지는 완료 예정입니다.<br>
       번역으로 인한 오류가 존재할 수 있기 때문에 반드시 원문도 확인하시길 바랍니다.
    </p>
    <dl class="meta">
        <dt>번역자:</dt>
        <dd>조은 &lt;<a href="mailto:apes0123@gmail.com">apes0123@gmail.com</a>&gt;</dd>
    </dl>
</div>
<div class="head">
    <!--begin-logo-->
    <p><a href="http://www.w3.org/"><img alt="W3C" height="48" src="http://www.w3.org/Icons/w3c_home" width="72"></a></p>
    <!--end-logo-->
    <h1 id="cors">크로스 오리진 리소스 공유 (Cross-Origin Resource Sharing)</h1>
    <h2 class="no-num no-toc" id="w3c-doctype">2014년 1월 16일 W3C 권고안</h2>
    <dl>
        <dt>이 버전:</dt>
        <dd class="publish"><a href="http://www.w3.org/TR/2014/REC-cors-20140116/">http://www.w3.org/TR/2014/REC-cors-20140116/</a></dd>
        <dt class="publish">마지막 버전:</dt>
        <dd class="publish"><a href="http://www.w3.org/TR/cors/">http://www.w3.org/TR/cors/</a></dd>
        <dt>이전 버전:</dt>
        <dd><a href="http://www.w3.org/TR/2013/PR-cors-20131205/">http://www.w3.org/TR/2013/PR-cors-20131205/</a></dd>
        <dd><a href="http://www.w3.org/TR/2013/CR-cors-20130129/">http://www.w3.org/TR/2013/CR-cors-20130129/</a></dd>
        <dd><a href="http://www.w3.org/TR/2012/WD-cors-20120403/">http://www.w3.org/TR/2012/WD-cors-20120403/</a></dd>
        <dd><a href="http://www.w3.org/TR/2010/WD-cors-20100727/">http://www.w3.org/TR/2010/WD-cors-20100727/</a></dd>
        <dd><a href="http://www.w3.org/TR/2009/WD-cors-20090317/">http://www.w3.org/TR/2009/WD-cors-20090317/</a></dd>
        <dd><a href="http://www.w3.org/TR/2008/WD-access-control-20080912/">http://www.w3.org/TR/2008/WD-access-control-20080912/</a></dd>
        <dd><a href="http://www.w3.org/TR/2008/WD-access-control-20080214/">http://www.w3.org/TR/2008/WD-access-control-20080214/</a></dd>
        <dd><a href="http://www.w3.org/TR/2007/WD-access-control-20071126/">http://www.w3.org/TR/2007/WD-access-control-20071126/</a></dd>
        <dd><a href="http://www.w3.org/TR/2007/WD-access-control-20071001/">http://www.w3.org/TR/2007/WD-access-control-20071001/</a></dd>
        <dd><a href="http://www.w3.org/TR/2007/WD-access-control-20070618/">http://www.w3.org/TR/2007/WD-access-control-20070618/</a></dd>
        <dd><a href="http://www.w3.org/TR/2007/WD-access-control-20070215/">http://www.w3.org/TR/2007/WD-access-control-20070215/</a></dd>
        <dd><a href="http://www.w3.org/TR/2006/WD-access-control-20060517/">http://www.w3.org/TR/2006/WD-access-control-20060517/</a></dd>
        <dd><a href="http://www.w3.org/TR/2005/NOTE-access-control-20050613/">http://www.w3.org/TR/2005/NOTE-access-control-20050613/</a></dd>
        <dt>작성자:</dt>
        <dd><a href="http://annevankesteren.nl/">Anne van Kesteren</a>
            (formerly of <a href="http://www.opera.com/">Opera Software ASA</a>)
            &lt;<a href="mailto:annevk@annevk.nl">annevk@annevk.nl</a>&gt;</dd>
    </dl>
    <p>이 문서의 <a href="http://www.w3.org/2014/cors-errata.html">errata</a>를 확인하시기 바랍니다.</p>
    <p>
        이 스펙 문서의 표준은 영문 버전만 존재합니다.
        표준이 아닌 <a href="http://www.w3.org/Consortium/Translation/">번역본</a>이 존재할 수도 있습니다.
        <span class="transnote">이 번역본은 한국어 번역본 입니다</span>
    </p>
    <div class="w3conly">
        <!--begin-copyright-->
        <p class="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2014 <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>), All Rights Reserved. W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p>
        <hr class="top">
        <!--end-copyright--></div>
</div>
<div class="publish">
    <h2 class="no-num no-toc" id="abstract">요약</h2>
    <p>
        이 문서는 클라이언트에서 크로스 오리진 요청(cross-origin requests)을 가능하게 하는 메커니즘을 정의합니다.
        이 스펙에 의해 정의된 알고리즘을 이용해 리소스를 크로스 오리진 요청할 수 있게 하는 API 스펙입니다.

        만약 API를 <code>http://example.org</code> 리소스에서 사용하고,
        리소스는 <code>http://hello-world.example</code>에 있다고 하면,
        이 스펙문서에서 소개하는 메커니즘을 선택하여
        사용하여(예를 들어, <code>Access-Control-Allow-Origin: http://example.org</code>를 응답 헤더로 둡니다),
        <code>http://example.org</code>에서 크로스 오리진으로 리소스를 가져올 수 있습니다.
    </p>

    <h2 class="no-num no-toc" id="sotd">이 문서의 상태</h2>
    <p><em>
        이 섹션은 이 문서를 공개했을 때 상태에 대해 설명합니다.
        다른 문서가 이 문서를 덮어쓸 가능성이 있으니 주의하시길 바랍니다.
        이 문서 및 W3C에서 공개한 다른 문서의 최신 버전은 <a href="http://www.w3.org/TR/">W3C technical reports index</a> at http://www.w3.org/TR/에서 확인 가능합니다.
    </em></p>

    <p>이 문서는 <abbr title="World Wide Web Consortium">W3C</abbr> 멤버, 소프트웨어 개발자, 그리고 다른 <abbr title="World Wide Web Consortium">W3C</abbr> 그룹 및 관계자들이 평가를 진행하여, 디렉터에 의해 <abbr title="World Wide Web Consortium">W3C</abbr> 권고안으로 발표했습니다.
        이 문서는 안정적이며, 참고자료로 사용하거나 다른 문서에서 인용해도 좋습니다.
        스펙 문서의 권고를 통해 <abbr title="World Wide Web Consortium">W3C</abbr>가 하는 역할은 스펙 문서에 관심을 모으고 다방면으로 퍼뜨리는 일입니다.
        이를 통해 웹의 기능과 상호운용성 향상을 기대할 수 있습니다.</p>

    <p>
        이 CORS W3C 권고안은
        <a href="http://www.w3.org/2008/webapps/">Web Applications</a> (WebApps)와
        <a href="http://www.w3.org/2011/webappsec/">Web Application Security</a> 워킹 그룹에서 주로 관리하며,
        WebAppSec 워킹그룹에 의해 발행되었습니다. 이전 후보 권고안 발행 버전과 차이점은 없습니다.
    </p>

    <p>
        만약 이 문서에 대한 코멘트를 남기고 싶다면,
        <a href="mailto:public-webappsec@w3.org">public-webappsec@w3.org</a>
        (<a href="mailto:public-webappsec-request@w3.org?subject=subscribe">subscribe</a>,
        <a href="http://lists.w3.org/Archives/Public/public-webappsec/">archives</a>)으로 보내주시길 바랍니다.
    </p>

    <p>이 문서는 <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">2004년 2월 6일 W3C 특허 정책</a>을 따르는 그룹에서 작성하였습니다.
        W3C는 그룹의 성과물에 관련하여 <a href="http://www.w3.org/2004/01/pp-impl/40318/status" rel="disclosure">모든 공개 특허 공개 리스트</a>를 관리합니다.
        여기에는 특허 공개에 대한 지시사항도 포함합니다.
        특허에 대해서 충분한 지식이 있는 사람이, 스펙 문서의 <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a>에 인정된다고 파악되는 경우, <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">W3C 특허 정책 제 6장</a>에 의거하여 정보를 공개해야 할 필요가 있습니다.</p>

    <p>
        이 권고안을 발행함으로써 W3C는 이 권고안 내 정의된 기능들이
        HTML5나 HTTP Status Code 308이 권고안 및 RFC 상태 진행으로 인해 내용이 변경되더라도
        영향을 받지 않을 거라 기대하고 있습니다.
    </p>

    <p>
        <a href="http://webappsec-test.info/~bhill2/pub/CORS/cors-test-supplement.htm">예비 권고안부터 변경사항</a>을 포함한
        <a href="http://odinho.html5.org/CORS/testsuite-report.html">구현보고서</a>를 사용할 수 있습니다.
    </p>

</div>

<h2 class="no-num no-toc" id="toc">목차</h2>


<!--begin-toc-->
<ol class="toc">
    <li><a href="#introduction"><span class="secno">1 </span>소개</a></li>
    <li><a href="#conformance"><span class="secno">2 </span>적합 요구사항</a></li>
    <li><a href="#terminology"><span class="secno">3 </span>용어</a></li>
    <li><a href="#security"><span class="secno">4 </span>Security Considerations</a></li>
    <li><a href="#syntax"><span class="secno">5 </span>문법</a>
        <ol class="toc">
            <li><a href="#access-control-allow-origin-response-header"><span class="secno">5.1 </span><code title="">Access-Control-Allow-Origin</code> 응답 헤더</a></li>
            <li><a href="#access-control-allow-credentials-response-header"><span class="secno">5.2 </span><code title="">Access-Control-Allow-Credentials</code> 응답 헤더</a></li>
            <li><a href="#access-control-expose-headers-response-header"><span class="secno">5.3 </span><code title="">Access-Control-Expose-Headers</code> 응답 헤더</a></li>
            <li><a href="#access-control-max-age-response-header"><span class="secno">5.4 </span><code title="">Access-Control-Max-Age</code> 응답 헤더</a></li>
            <li><a href="#access-control-allow-methods-response-header"><span class="secno">5.5 </span><code title="">Access-Control-Allow-Methods</code> 응답 헤더</a></li>
            <li><a href="#access-control-allow-headers-response-header"><span class="secno">5.6 </span><code title="">Access-Control-Allow-Headers</code> 응답 헤더</a></li>
            <li><a href="#origin-request-header"><span class="secno">5.7 </span><code title="">Origin</code> 요청 헤더</a></li>
            <li><a href="#access-control-request-method-request-header"><span class="secno">5.8 </span><code title="">Access-Control-Request-Method</code> 요청 헤더</a></li>
            <li><a href="#access-control-request-headers-request-header"><span class="secno">5.9 </span><code title="">Access-Control-Request-Headers</code> 요청 헤더</a></ol></li>
    <li><a href="#resource-processing-model"><span class="secno">6 </span>Resource Processing Model</a>
        <ol class="toc">
            <li><a href="#resource-requests"><span class="secno">6.1 </span>Simple Cross-Origin Request, Actual Request, and
                Redirects</a></li>
            <li><a href="#resource-preflight-requests"><span class="secno">6.2 </span>Preflight Request</a></li>
            <li><a href="#resource-security"><span class="secno">6.3 </span>Security</a></li>
            <li><a href="#resource-implementation"><span class="secno">6.4 </span>Implementation Considerations</a></ol></li>
    <li><a href="#user-agent-processing-model"><span class="secno">7 </span>User Agent Processing Model</a>
        <ol class="toc">
            <li><a href="#cross-origin-request-0"><span class="secno">7.1 </span>Cross-Origin Request</a>
                <ol class="toc">
                    <li><a href="#handling-a-response-to-a-cross-origin-request"><span class="secno">7.1.1 </span>Handling a Response to a Cross-Origin Request</a></li>
                    <li><a href="#cross-origin-request-status-0"><span class="secno">7.1.2 </span>Cross-Origin Request Status</a></li>
                    <li><a href="#source-origin-0"><span class="secno">7.1.3 </span>Source Origin</a></li>
                    <li><a href="#simple-cross-origin-request-0"><span class="secno">7.1.4 </span>Simple Cross-Origin Request</a></li>
                    <li><a href="#cross-origin-request-with-preflight-0"><span class="secno">7.1.5 </span>Cross-Origin Request with Preflight</a></li>
                    <li><a href="#preflight-result-cache-0"><span class="secno">7.1.6 </span>Preflight Result Cache</a></li>
                    <li><a href="#generic-cross-origin-request-algorithms"><span class="secno">7.1.7 </span>Generic Cross-Origin Request Algorithms</a></ol></li>
            <li><a href="#resource-sharing-check-0"><span class="secno">7.2 </span>Resource Sharing Check</a></li>
            <li><a href="#user-agent-security"><span class="secno">7.3 </span>Security</a></ol></li>
    <li><a href="#cors-api-specification-advice"><span class="secno">8 </span>CORS API Specification Advice</a>
        <ol class="toc">
            <li><a href="#cors-api-specifiation-request"><span class="secno">8.1 </span>Constructing a Cross-Origin Request</a></li>
            <li><a href="#cors-api-specification-redirect"><span class="secno">8.2 </span>Dealing with Same Origin to Cross-Origin Redirects</a></li>
            <li><a href="#cors-api-specification-response"><span class="secno">8.3 </span>Dealing with the
                Cross-Origin Request Status</a></li>
            <li><a href="#cors-api-specification-security"><span class="secno">8.4 </span>Security</a></ol></li>
    <li><a class="no-num" href="#references">References</a></li>
    <li><a class="no-num" href="#acknowledgments">Acknowledgments</a></ol>
<!--end-toc-->

<h2 id="introduction"><span class="secno">1 </span>소개</h2>

<p><em>이 섹션은 표준에 준하지 않습니다.</em></p>

<p>
    유저 에이전트는 보통 네트워크 요청에서 같은 오리진 제한(same-origin restrictions)을 적용합니다.
    이 제한은 클라이언트 사이드 웹 어플리케이션이 하나의 오리진에서 동작할 때 다른 오리진에서 데이터를 취득하는 걸 제한하며,
    동작 중인 어플리케이션 오리진에서 다른 목적지로 자동으로 향하기 시작하는게 가능한 안전하지 않은 HTTP 요청에 제한을 둡니다.
</p>

<p>
    유저 에이전트에서 이런 패턴을 따를 경우,
    네트워크 요청은 물리적으로 HTTP 인증과 쿠키 정보를 포함한 크로스 오리진 요청과 함께 유저 인증서를 포함합니다.
</p>

<p>
    이 스펙에서는 이 모델을 다양한 방법으로 확장합니다:
</p>

<ul>
<li>
    <p>
        리소스의 콘텐츠에 접근을 허용하기 위해, 요청이 어디에서 비롯되었는 지를 값으로 가지는 오리진과 함께,
        응답에 <code title="http-access-control-allow-origin"><a href="#http-access-control-allow-origin">
        Access-Control-Allow-Origin</a></code> 헤더를 포함할 수 있습니다.
    </p>
    <p>
        유저 에이전트는 값과 요청이 발생한 위치의 오리진이 일치하는 지 검증합니다.
    </p>
</li>
<li>
    <p>
        유저 에이전트는 주어진 오리진에서 non-<a href="#simple-method">simple method</a>를 사용하여,
        크로스 오리진 리소스 요청을 수락할 준비가 되어있는지 여부를,
        <a href="#preflight-request">preflight request</a>를 통해 발견할 수 있습니다.
    </p>
    <p>이는 유저 에이전트에 의해 다시 검증합니다.</p>
</li>

<li>
    <p>
        서버 사이드 어플리케이션은 <code title="http-origin"><a href="#http-origin">Origin</a></code> 헤더를 통해,
        HTTP 요청이 유저 에이전트간 크로스 오리진 요청인지 여기는 지 발견할 수 있습니다.
    </p>
    <p>
        이 확장은 서비스에 흔쾌히 크로스 오리진 요청 제한을 적용(예를 들어 아무 것도 리턴하지 않음)할
        서버 사이드 어플리케이션을 사용할 수 있게됩니다.
    </p>
</li>
</ul>

<p>
    이 스펙문서에서는 이 스펙 문서가 어떻게 사용되어야 하는 지 정의하는,
    소위 CORS API 스펙문서이며, 다른 스펙을 위한 소재(building block)입니다.
    예로는 Server-Sent Events와 XMLHttpRequest가 있습니다.
    <a class="informative" href="#refsEVENTSOURCE">[EVENTSOURCE]</a>
    <a class="informative" href="#refsXHR">[XHR]</a>
</p>

<p>
    <a href="http://www.w3.org/wiki/CORS">CORS 위키 페이지</a>는 이 문서에 대한 더 많은 배경 지식을 제공합니다.
</p>

<div class="example">
    <!-- todo: 예제 1. 추후번역 -->
    <p>If a resource author has a simple text resource residing at
        <code>http://example.com/hello</code> which contains the string
        "Hello World!" and would like <code>http://hello-world.example</code> to
        be able to access it, the response combined with a header
        introduced by this specification could look as follows:</p>

   <pre><code>Access-Control-Allow-Origin: http://hello-world.example

       Hello World!</code></pre>

    <p>Using <code class="external"><a href="http://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html#xmlhttprequest">XMLHttpRequest</a></code> a client-side
        Web application on <code>http://hello-world.example</code> can access
        this resource as follows:

   <pre><code>var client = new XMLHttpRequest()
       client.open("GET", "http://example.com/hello")
       client.onreadystatechange = function() { /* do something */ }
       client.send()</code></pre>

    <p>It gets slightly more complicated if the resource author wants to be
        able to handle cross-origin requests using methods other than
        <a href="#simple-method" title="simple method">simple methods</a>. In that case
        the author needs to reply to a preflight request that uses the
        <code>OPTIONS</code> method and then needs to handle the actual request
        that uses the desired method (<code>DELETE</code> in this example) and
        give an appropriate response. The response to the preflight request could
        have the following headers specified:</p>

   <pre><code>Access-Control-Allow-Origin: http://hello-world.example
       Access-Control-Max-Age: 3628800
       Access-Control-Allow-Methods: PUT, DELETE</code></pre>

    <p>The
        <code title="http-access-control-max-age"><a href="#http-access-control-max-age">Access-Control-Max-Age</a></code>
        header indicates how long the response can be cached, so that for
        subsequent requests, within the specified time, no preflight request has
        to be made. The
        <code title="http-access-control-allow-methods"><a href="#http-access-control-allow-methods">Access-Control-Allow-Methods</a></code>
        header indicates the methods that can be used in the actual request. The
        response to the actual request can simply contain this header:</p>

    <pre><code>Access-Control-Allow-Origin: http://hello-world.example</code></pre>

    <p>The complexity of invoking the additional preflight request is
        the task of the user agent. Using
        <code class="external"><a href="http://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html#xmlhttprequest">XMLHttpRequest</a></code> again and assuming the
        application were hosted at <code>http://calendar.example/app</code> the
        author could use the following ECMAScript snippet:

   <pre><code>function deleteItem(itemId, updateUI) {
       var client = new XMLHttpRequest()
       client.open("DELETE", "http://calendar.example/app")
       client.onload = updateUI
       client.onerror = updateUI
       client.onabort = updateUI
       client.send("id=" + itemId)
       }</code></pre>
</div>

<h2 id="conformance"><span class="secno">2 </span>적합 요구사항</h2>
<p>
    이 스펙문서는 리소스 작성자와 유저 에이전트를 위해 작성했습니다.
    이 스펙문서 내에서 정의하는 <a href="#cross-origin-request">크로스 오리진 요청</a>
    알고리즘을 사용하는 API를 정의하는 스펙문서&mdash;CORS API 정의&mdash;를 위한 조언을 포함하며,
    일반 <a href="#security">보안 고려사항</a> 섹션은 클라이언트 사이드 웹 어플리케이션 작성자를 위한
    몇가지 조언을 포함하고 있습니다.
</p>
<p>
    이 스펙문서 내에서 표준에 준하지 않는다 따로 표시한 섹션과 부록, 모든 다이어그램, 예제, 노트는 표준에 준하지 않습니다.
    그 외는 모두 표준에 준합니다.
</p>

<p>
    이 스펙문서에서, must와 may같은 단어는 RFC 2119에서 소개하는 대로 해석합니다.
    <a href="#refsRFC2119">[RFC2119]</a>
</p>

<p>
    반드시 해야한다고 나타낸 알고리즘의 일부(예를 들어, "알고리즘을 종료") 요구사항은
    알고리즘 소개에서 사용하는 키워드(예를 들어, must)의 의미로 해석해야합니다.
</p>
<p>
    순응 리소스는 이 스펙문서에 나와있는 리소스에 적용할 수 있는 모든 요구사항을 구현하는 것입니다.
</p>

<p>
    순응 유저 에이전트는 이 스펙문서에 나와있는 유저 에이전트에 적용할 수 있는 모든 요구사항을 구현하는 것입니다.
</p>

<p>
    유저 에이전트와 리소스 작성자는 스펙문서의 알고리즘으로 얻어진 것인지 결과 구분이 안되는 동안에는,
    이 스펙의 구현체의 임의의 알고리즘을 사용할 수 있습니다.
</p>

<h2 id="terminology"><span class="secno">3 </span>용어</h2>

<p>
    이 스펙 문서 내의 몇가지 용어는 <cite>The Web Origin Concept</cite>,
    <cite>HTML</cite>,<!--fetch-->
    <cite>HTTP</cite>,
    <cite>URI</cite>에서 인용했습니다.
    <a href="#refsORIGIN">[ORIGIN]</a>
    <a href="#refsHTML">[HTML]</a>
    <a href="#refsHTTP">[HTTP]</a>
    <a href="#refsURI">[URI]</a>
</p>
<p>
    용어는 이 스펙문서를 뛰어넘는 공용으로 정의되어있습니다.
    그러나, 몇가지 정의는 어디에서나 사용할 때 여기서 정의한 것과 딱 맞지 않을 수도 있습니다.
</p>
<p>
    <dfn id="case-sensitive">대소문자 구분</dfn>으로 두 문자열을 비교하는 건,
    코드 포인트에서 코드 포인트를 정확하게 비교하는 걸 의미합니다.
</p>
<p>
    <dfn id="ascii-case-insensitive">ASCII 대소문자를 구분하지 않고</dfn> 두 문자열을 비교하는 건,
    코드 포인트에 대한 코드 포인트를 정확히 비교하지만,
    U+0041 라틴 대문자 A부터 U+005A 라틴 대문자 Z 범위와
    U+0061 라틴 소문자 A부터 U+007A 라틴 소문자 Z에 해당하는 범위가
    매치하는 것으로 간주된다는 걸 의미합니다.
</p>

<p>
    <dfn id="converted-to-ascii-lowercase" title="converted to ASCII lowercase">ASCII 소문자 문자열 변환</dfn>
    은 U+0041 라틴 대문자 A부터 U+005A 라틴 대문자 Z까지 범위의 모든 문자가
    U+0061 라틴 소문자 A부터 U+007A 라틴 소문자 Z까지 범위에 일치함을 나타냅니다.
</p>
<p>
    이 스펙 문서의 목적상, 용어 <dfn id="user-credentials">사용자 자격증명</dfn>은
    오리진에서 동작하는 유저 에이전트의 이전 인터렉션을 기반으로 둔 쿠키, HTTP 인증, 클라이언트 사이드 SSL 인증을 의미합니다.

    구체적으로는 프록시 인증 및 <code title="http-origin"><a href="#http-origin">Origin</a></code>
    헤더를 참조하지 않습니다.
    <a href="#refsCOOKIES">[COOKIES]</a>
</p>

<p>
    용어 <dfn id="cross-origin">크로스 오리진</dfn>은
    <a class="external" href="http://tools.ietf.org/html/rfc6454#section-5">same origin</a>을 의미하는 용어가
    아닙니다.
</p>

<p>
    <var title="">method</var>는 아래 목록 중 하나에 <a href="#case-sensitive">대소문자 구분</a>하여 일치하는 경우,
    <dfn id="simple-method">간단 메서드</dfn>를 의미합니다.
</p>

<ul>
    <li><code>GET</code></li>
    <li><code>HEAD</code></li>
    <li><code>POST</code></li>
</ul>

<p>
    <var title="">header</var>는 헤더 필드 명이 <code>Accept</code>,
    <code>Accept-Language</code>, <code>Content-Language</code>에
    <a href="#ascii-case-insensitive">ASCII 대소문자를 구분하지 않고</a> 일치 하거나,
    <code>Content-Type</code>에 <a href="#ascii-case-insensitive">ASCII 대소문자를 구분하지 않고</a> 일치하거나,
    (파라미터를 제외한) 헤더 필드 값 미디어 타입이 <code>application/x-www-form-urlencoded</code>,
    <code>multipart/form-data</code>, <code>text/plain</code>에
    <a href="#ascii-case-insensitive">ASCII 대소문자를 구분하지 않고</a> 일치하는 경우
    <dfn id="simple-header">간단 헤더</dfn>를 의미합니다.
</p>

<p>
    <var title="">header</var>는 헤더 필드 명이 아래 목록 중 하나에
    <a href="#ascii-case-insensitive">ASCII 대소문자를 구분하지 않고</a> 일치하는 경우
    <dfn id="simple-response-header">간단 응답 헤더</dfn>를 의미합니다.
</p>

<ul>
    <li><code>Cache-Control</code></li>
    <li><code>Content-Language</code></li>
    <li><code>Content-Type</code></li>
    <li><code>Expires</code></li>
    <li><code>Last-Modified</code></li>
    <li><code>Pragma</code></li>
</ul>

<p>
    <dfn id="header-parsing" title="header parsing">헤더를 해석</dfn>할 때
    반드시 <a href="#syntax">문법</a> 섹션에서 ABNF 프로덕션에 해당하는 대로 해석해야만 합니다
    만약 헤더가 프로덕션에 매치하지 않는 경우 <dfn id="header-parsing-failed">헤더 해석 실패</dfn>라 부릅니다.
</p>

<h2 id="security"><span class="secno">4 </span>보안 고려사항</h2>

<p><em>이 섹션은 표준에 준하지 않습니다.</em></p>
<p>
    이 스펙 내 존재하는 보안 요구사항 및 고려사항을 리스팅해둔 내용입니다.
    다른 곳에서는 적합하지 않는 부분을 이 섹션에서 조언합니다.
</p>
<hr>
<!-- todo: 보안관련내용 검토 필요 -->
<p>
    A <a href="#simple-cross-origin-request">simple cross-origin request</a> has been defined as congruent
    with those which may be generated by currently deployed user agents that do
    not conform to this specification.

    Simple cross-origin requests generated outside this specification (such as cross-origin form submissions using
    <code>GET</code> or <code>POST</code> or cross-origin <code>GET</code>
    requests resulting from <code>script</code> elements) typically include
    <a href="#user-credentials">user credentials</a>, so resources conforming to this specification
    must always be prepared to expect simple cross-origin requests with credentials.
</p>

<p>Because of this, resources for which simple requests have significance
    other than retrieval must protect themselves from Cross-Site Request Forgery
    (CSRF)
    by requiring the inclusion of an unguessable token in the explicitly
    provided content of the request.
    <a class="informative" href="#refsCSRF">[CSRF]</a>

<p>This specification defines how to authorize an instance of an application
    from a foreign origin, executing in the user agent, to access the
    representation of the resource in an HTTP response. Certain types of
    resources should not attempt to specify particular authorized origins, but
    instead either deny or allow all origins.

    <ol>
        <li><p>A resource that is not useful to applications from other origins, such as a login page, ought not to return an
    <code title="http-access-control-allow-origin"><a href="#http-access-control-allow-origin">Access-Control-Allow-Origin</a></code>
    header. The resource still must protect itself against CSRF attacks, such
    as by requiring the inclusion of an unguessable token in the explicitly
    provided content of the request. The security properties of such resources
    are unaffected by user-agents conformant to this specification.

    <li>
<p>A resource that is publicly accessible, with no access control checks,
    can always safely return an
    <code title="http-access-control-allow-origin"><a href="#http-access-control-allow-origin">Access-Control-Allow-Origin</a></code>
    header whose value is "<code>*</code>".

    <li><p>A <code>GET</code> response whose entity body happens to parse as
    ECMAScript can return an
    <code title="http-access-control-allow-origin"><a href="#http-access-control-allow-origin">Access-Control-Allow-Origin</a></code>
    header whose value is "<code>*</code>" provided there are no sensitive
    comments as it can be accessed cross-origin using an HTML
    <code>script</code> element. If needed, such resources can implement access
    control and CSRF protections as described above.
    </ol>

<p>Requests made with <a href="#user-credentials">user credentials</a>,
    or the <code title="http-origin"><a href="#http-origin">Origin</a></code> header
    require special consideration.</p>

<ol>
    <li>
        <p>When requests have significance other than retrieval, and when relying on the <code title="http-origin"><a href="#http-origin">Origin</a></code> header, resources must be careful to distinguish between authorizing a request (including its side-effects) and authorizing access to the representation of that resource in the response.

            <ol>
                <li><p>Authorization for a request should be performed using only the intersection of the authority of the user and the requesting origin(s).

    <li><p>It is often appropriate for resources to require an authorization ceremony which explicitly asks for a user to consent that cross-origin requests with credentials be honored from a given origin.  In such cases, passing security tokens explicitly as part of the cross-origin request can remove any ambiguity as to the scope of authorization. OAuth is an example of this pattern.
        <a class="informative" href="#refsOAUTH">[OAUTH]</a>
</ol>

<li>
    <p>Use of <a href="#user-credentials">user credentials</a> in a cross-origin request is
        appropriate when:

        <ol>
            <li>
    <p>A cross-origin request with credentials as defined in this
        specification is used to substitute for alternate methods of
        authenticated resource sharing, such as server-to-server back channels,
        JSONP, or cross-document messaging.
        <a class="informative" href="#refsJSONP">[JSONP]</a>
        <a class="informative" href="#refsHTML">[HTML]</a>

    <p>This substitution can expose additional attack surface in some cases,
        as a cross-site scripting vulnerability in the requesting origin can
        allow elevation of privileges against the requested resource when
        compared to a server-to-server back channel.

    <p>As a substitute for JSONP-style cross-origin credentialed requests,
        use of this specification significantly improves the security posture of
        the requesting application, as it provides cross-origin data access
        whereas JSONP operates via cross-origin code-injection.

    <p>As a substitute for cross-origin communication techniques relying on loading a resource, with credentials, into an HTML <code>iframe</code> element, and subsequently employing cross-document messaging or other cross-origin side channels, this specification provides a roughly equivalent security posture. Again, data received from origins that are not completely trusted has to be validated to conform to expected formats and authorized values.

<li><p>For requests to resources that have no significance other than retrieval, and where the credentials are used only to provide user-specific customization for otherwise publicly accessible information. In this case, restricting access to certain origins may protect user privacy by preventing customizations from being used to identify a user, except at authorized origins.
    </ol>

<li>
    <p>When this specification is used for requests which have significance
        other than retrieval and which involve coordination between or data
        originating from more than two origins, (e.g. between resources enabling
        editing, printing and storage, each at distinct origins) requests ought to
        set the <a href="#omit-credentials-flag">omit credentials flag</a> and resources ought to
        perform authorization using security tokens explicitly provided in the
        content of the request, especially if the origins are not all mutually and
        completely trusted.

    <p>In such multi-origin scenarios, a malicious resource at one of the
        origins may be able to enlist the user-agent as a confused deputy and
        elevate its privileges by abusing user credentials sent with cross-origin
        requests. Avoiding
        such attacks requires that the coordinating applications have explicit
        knowledge of the scope of privilege for each origin and that all
        parameters and instructions received are carefully validated at each step
        in the coordination to ensure that effects implied do not exceed the
        authority of the originating principal.
        <a class="informative" href="#refsCONFUSED">[CONFUSED]</a>

    <p>Given the difficulty of avoiding such vulnerabilities in multi-origin
        interactions it is recommended that, instead of using user
        credentials automatically attached to the request by the user agent,
        security tokens which specify the particular capabilities and
        resources authorized be passed as part of the explicit content of a request.
        OAuth again provides an example of such a pattern.
        </ol>

    <hr>

    <p>Authors of client-side Web applications are strongly encouraged to
        validate content retrieved from a <a href="#cross-origin">cross-origin</a> resource as it
        might be harmful.</p>


    <p>Web applications that are not uniquely identified by specific host names,
        and/or mapped to specific ports, do not necessarily have a unique origin, and
        thus will not be able to securely utilize the mechanism defined in this
        specification. This is because an origin is composed of only the
        scheme, hostname, and port.</p>

    <p>For example, a web application whose URL is of the type
        <code>example.org/<var>app-name</var>/</code> and the app-name portion is necessary to distinguish the
        web application from other web applications also running at example.org, will
        be unable to securely employ the mechanism defined in this specification.</p>

    <p>Mapping web applications to distinct
        <a class="external" href="http://tools.ietf.org/html/rfc6454#section-4">origins</a>
        is vital for secure web applications.</p>


    <h2 id="syntax"><span class="secno">5 </span>문법</h2>

    <p>
        이 섹션에서는 이 스펙문서에서 소개하는 새로운 헤더의 문법을 정의합니다.
        또 각 헤더에서 사용하는 함수의 짧은 설명을 제공합니다.
    </p>

    <p>
        <a href="#resource-processing-model">리소스 처리 모델</a> 섹션은 리소스가 어떻게
        응답 안 헤더에서 사용하는 지 디테일을 소개합니다.

        마찬가지로, <a href="#user-agent-processing-model">유저 에이전트 처리 모델</a> 섹션은
        리소스를 어떻게 헤더에서 사용하는 지 디테일을 소개합니다.
    </p>

    <p>
        이 섹션에서 사용하는 ABNF 문법은 HTTP/1.1에서 가져왔습니다. <a href="#refsHTTP">[HTTP]</a>
    </p>

    <p class="note">
        HTTP/1.1은 새로운 헤더가 해당 스펙에 도입된 것과 동등한 파싱 규칙이 되도록 ABNF를 사용합니다.
    </p>

    <p class="note">
        HTTP/1.1은 현재 헤더 값 정의에 상정 OWS를 이끌지 않지만, 그 형태는 가정합니다.
    </p>

    <h3 id="access-control-allow-origin-response-header"><span class="secno">5.1 </span><code title="">Access-Control-Allow-Origin</code> 응답 헤더</h3>

    <p>
        <dfn id="http-access-control-allow-origin" title="http-access-control-allow-origin"><code>Access-Control-Allow-Origin</code></dfn> 헤더는
        <code title="http-origin"><a href="#http-origin">Origin</a></code> 요청 헤더의 값, "*", 요청 내 "null" 반환을 기반으로 리소스가 공유 가능한 지 가리킵니다.
        ABNF:
    </p>

    <pre>Access-Control-Allow-Origin = "Access-Control-Allow-Origin" ":" <a class="external" href="http://tools.ietf.org/html/rfc6454#section-7.1">origin-list-or-null</a> | "*"</pre>

    <p class="note">
        실제로 <code class="external"><a href="http://tools.ietf.org/html/rfc6454#section-7.1">origin-list-or-null</a></code> 생성은 더 제한적입니다.
        오히려 스페이스로 나뉘어진 <a class="external" href="http://tools.ietf.org/html/rfc6454#section-4" title="origin">origins</a> 목록보다,
        단일 <a class="external" href="http://tools.ietf.org/html/rfc6454#section-4">origin</a>이나 문자열 "<code title="">null</code>" 중 하나를 허용합니다.
        <!-- serialized-origin / %x6E %x75 %x6C %x6C / "*" -->
    </p>

    <h3 id="access-control-allow-credentials-response-header"><span class="secno">5.2 </span><code title="">Access-Control-Allow-Credentials</code> 응답 헤더</h3>

    <p>The
        <dfn id="http-access-control-allow-credentials" title="http-access-control-allow-credentials"><code>Access-Control-Allow-Credentials</code></dfn>
        header indicates whether the response to request can be
        exposed when the <a href="#omit-credentials-flag">omit credentials flag</a> is unset.

        When part of the response to a <a href="#preflight-request">preflight request</a> it indicates that the
        <a href="#actual-request">actual request</a> can include <a href="#user-credentials">user credentials</a>.
        ABNF:</p>

  <pre>Access-Control-Allow-Credentials: "Access-Control-Allow-Credentials" ":" true
                            true: %x74.72.75.65 ; "true", case-sensitive</pre>


    <h3 id="access-control-expose-headers-response-header"><span class="secno">5.3 </span><code title="">Access-Control-Expose-Headers</code> Response Header</h3>

    <p>The
        <dfn id="http-access-control-expose-headers" title="http-access-control-expose-headers"><code>Access-Control-Expose-Headers</code></dfn>
        header indicates which headers are safe to expose to the API of a
        CORS API specification. ABNF:</p>

    <pre>Access-Control-Expose-Headers = "Access-Control-Expose-Headers" ":" #<a class="external" href="http://tools.ietf.org/html/rfc2616/#section-4.2">field-name</a></pre>


    <h3 id="access-control-max-age-response-header"><span class="secno">5.4 </span><code title="">Access-Control-Max-Age</code> Response Header</h3>

    <p>The
        <dfn id="http-access-control-max-age" title="http-access-control-max-age"><code>Access-Control-Max-Age</code></dfn>
        header indicates how long the results of a <a href="#preflight-request">preflight request</a>
        can be cached in a <a href="#preflight-result-cache">preflight result cache</a>. ABNF:</p>

    <pre>Access-Control-Max-Age = "Access-Control-Max-Age" ":" <a class="external" href="http://tools.ietf.org/html/rfc2616/#section-3.3.2">delta-seconds</a></pre>


    <h3 id="access-control-allow-methods-response-header"><span class="secno">5.5 </span><code title="">Access-Control-Allow-Methods</code> Response Header</h3>

    <p>The
        <dfn id="http-access-control-allow-methods" title="http-access-control-allow-methods"><code>Access-Control-Allow-Methods</code></dfn>
        header indicates, as part of the response to a
        <a href="#preflight-request">preflight request</a>, which methods can be used during the
        <a href="#actual-request">actual request</a>.
    <p class="note">The `<code title="">Allow</code>` header is
        not relevant for the purposes of the CORS protocol.
        ABNF:</p>

    <pre>Access-Control-Allow-Methods: "Access-Control-Allow-Methods" ":" #<a class="external" href="http://tools.ietf.org/html/rfc2616/#section-5.1.1">Method</a></pre>



    <h3 id="access-control-allow-headers-response-header"><span class="secno">5.6 </span><code title="">Access-Control-Allow-Headers</code> Response Header</h3>

    <p>The
        <dfn id="http-access-control-allow-headers" title="http-access-control-allow-headers"><code>Access-Control-Allow-Headers</code></dfn>
        header indicates, as part of the response to a
        <a href="#preflight-request">preflight request</a>, which header field names can be used
        during the <a href="#actual-request">actual request</a>. ABNF:</p>

    <pre>Access-Control-Allow-Headers: "Access-Control-Allow-Headers" ":" #<a class="external" href="http://tools.ietf.org/html/rfc2616/#section-4.2">field-name</a></pre>


    <h3 id="origin-request-header"><span class="secno">5.7 </span><code title="">Origin</code> Request Header</h3>

    <p>The
        <dfn id="http-origin" title="http-origin"><code>Origin</code></dfn>
        header indicates where the <a href="#cross-origin-request">cross-origin request</a> or
        <a href="#preflight-request">preflight request</a> originates from.
        <a href="#refsORIGIN">[ORIGIN]</a></p>


    <h3 id="access-control-request-method-request-header"><span class="secno">5.8 </span><code title="">Access-Control-Request-Method</code> Request Header</h3>

    <p>The
        <dfn id="http-access-control-request-method" title="http-access-control-request-method"><code>Access-Control-Request-Method</code></dfn>
        header indicates which method will be used in the
        <a href="#actual-request">actual request</a> as part of the
        <a href="#preflight-request">preflight request</a>. ABNF:</p>

    <pre>Access-Control-Request-Method: "Access-Control-Request-Method" ":" <a class="external" href="http://tools.ietf.org/html/rfc2616/#section-5.1.1">Method</a></pre>


    <h3 id="access-control-request-headers-request-header"><span class="secno">5.9 </span><code title="">Access-Control-Request-Headers</code> Request Header</h3>

    <p>The
        <dfn id="http-access-control-request-headers" title="http-access-control-request-headers"><code>Access-Control-Request-Headers</code></dfn>
        header indicates which headers will be used in the
        <a href="#actual-request">actual request</a> as part of the
        <a href="#preflight-request">preflight request</a>. ABNF:</p>

    <pre>Access-Control-Request-Headers: "Access-Control-Request-Headers" ":" #<a class="external" href="http://tools.ietf.org/html/rfc2616/#section-4.2">field-name</a></pre>




    <h2 id="resource-processing-model"><span class="secno">6 </span>Resource Processing Model</h2>

    <p>This section describes the processing models that resources have to
        implement. Each type of request a resource might have to deal with is
        described in its own subsection.</p>

    <p>The resource sharing policy described by this specification is bound to
        a particular resource. For the purposes of this section each resource is
        bound to the following:</p>

    <ul>
        <li>
            <p>A <dfn id="list-of-origins">list of origins</dfn> consisting of zero or more
                <a class="external" href="http://tools.ietf.org/html/rfc6454#section-4" title="origin">origins</a> that are
                allowed access to the resource.</p>

            <p class="note">This can include the
                <a class="external" href="http://tools.ietf.org/html/rfc6454#section-4">origin</a> of the resource itself
                though be aware that requests to <a href="#cross-origin">cross-origin</a> resources can
                be redirected back to the resource.</p>
        </li>

        <li><p>A <dfn id="list-of-methods">list of methods</dfn> consisting of zero or more methods
            that are supported by the resource.</li>

        <li><p>A <dfn id="list-of-headers">list of headers</dfn> consisting of zero or more header
            field names that are supported by the resource.</li>

        <li><p>A <dfn id="list-of-exposed-headers">list of exposed headers</dfn> consisting of zero or more
            header field names of headers other than the
            <a href="#simple-response-header" title="simple response header">simple response headers</a> that the resource might use and can be exposed.</li>

        <li><p>A <dfn id="supports-credentials">supports credentials</dfn> flag that indicates whether the
            resource supports <a href="#user-credentials">user credentials</a> in the request. It is
            true when the resource does and false otherwise.</li>
    </ul>


    <h3 id="resource-requests"><span class="secno">6.1 </span>Simple Cross-Origin Request, Actual Request, and
        Redirects</h3>

    <p>In response to a <a href="#simple-cross-origin-request">simple cross-origin request</a> or
        <a href="#actual-request">actual request</a> the resource indicates whether or not to share
        the response.</p>

    <p>If the resource has been relocated, it indicates whether to share
        its new <a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/urls.html#url">URL</a>.</p>

    <p>Resources must use the following set of steps to
        determine which additional headers to use in the response:</p>

    <ol>
        <li><p>If the <code title="http-origin"><a href="#http-origin">Origin</a></code> header is not
            present terminate this set of steps. The request is outside the scope of
            this specification.</li>

        <li>
            <p>If the value of the <code title="http-origin"><a href="#http-origin">Origin</a></code>
                header is not a <a href="#case-sensitive">case-sensitive</a> match for any of the values
                in <a href="#list-of-origins">list of origins</a>, do not set any additional headers and
                terminate this set of steps.</p>

            <p class="note">Always matching is acceptable since the
                <a href="#list-of-origins">list of origins</a> can be unbounded.</p>
        </li>

        <li>
            <p>If the resource <a href="#supports-credentials">supports credentials</a> add a single
                <code title="http-access-control-allow-origin"><a href="#http-access-control-allow-origin">Access-Control-Allow-Origin</a></code>
                header, with the value of the <code title="http-origin"><a href="#http-origin">Origin</a></code>
                header as value, and add a single
                <code title="http-access-control-allow-credentials"><a href="#http-access-control-allow-credentials">Access-Control-Allow-Credentials</a></code>
                header with the <a href="#case-sensitive">case-sensitive</a> string
                "<code title="">true</code>" as value.</p>

            <p>Otherwise, add a single
                <code title="http-access-control-allow-origin"><a href="#http-access-control-allow-origin">Access-Control-Allow-Origin</a></code>
                header, with either the value of the
                <code title="http-origin"><a href="#http-origin">Origin</a></code> header or the string
                "<code title="">*</code>" as value.</p>

            <p class="note">The string "<code title="">*</code>" cannot be used for a
                resource that <a href="#supports-credentials">supports credentials</a>.</p>
        </li>

        <li><p>If the <a href="#list-of-exposed-headers">list of exposed headers</a> is not empty add one
            or more
            <code title="http-access-control-expose-headers"><a href="#http-access-control-expose-headers">Access-Control-Expose-Headers</a></code>
            headers, with as values the header field names given in the
            <a href="#list-of-exposed-headers">list of exposed headers</a>.</li>
    </ol>

    <p class="note">By not adding the appropriate headers resource can also
        clear the <a href="#preflight-result-cache">preflight result cache</a> of all entries where
        <a href="#cache-origin" title="cache-origin">origin</a> is a <a href="#case-sensitive">case-sensitive</a>
        match for the value of the <code title="http-origin"><a href="#http-origin">Origin</a></code>
        header and <a href="#cache-url" title="cache-url">url</a> is a
        <a href="#case-sensitive">case-sensitive</a> match for the
        <a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/urls.html#url">URL</a> of the
        resource.</p>


    <h3 id="resource-preflight-requests"><span class="secno">6.2 </span>Preflight Request</h3>

    <p>In response to a <a href="#preflight-request">preflight request</a> the resource indicates
        which methods and headers (other than
        <a href="#simple-method" title="simple method">simple methods</a> and
        <a href="#simple-header" title="simple header">simple headers</a>) it is willing to handle
        and whether it <a href="#supports-credentials">supports credentials</a>.</p>

    <p>Resources must use the following set of steps to
        determine which additional headers to use in the response:</p>

    <ol>
        <li><p>If the <code title="http-origin"><a href="#http-origin">Origin</a></code> header is not
            present terminate this set of steps. The request is outside the scope of
            this specification.</li>

        <li>
            <p>If the value of the <code title="http-origin"><a href="#http-origin">Origin</a></code>
                header is not a <a href="#case-sensitive">case-sensitive</a> match for any of the
                values in <a href="#list-of-origins">list of origins</a> do not set any additional headers
                and terminate this set of steps.</p>

            <p class="note">Always matching is acceptable since the
                <a href="#list-of-origins">list of origins</a> can be unbounded.</p>

            <p class="note">The <code title="http-origin"><a href="#http-origin">Origin</a></code> header can
                only contain a single <a class="external" href="http://tools.ietf.org/html/rfc6454#section-4">origin</a> as the
                user agent will not follow redirects.</p>
        </li>

        <li>
            <p>Let <var title="">method</var> be the value as result of
                <a href="#header-parsing" title="header parsing">parsing</a> the
                <code title="http-access-control-request-method"><a href="#http-access-control-request-method">Access-Control-Request-Method</a></code>
                header.</p>

            <p>If there is no
                <code title="http-access-control-request-method"><a href="#http-access-control-request-method">Access-Control-Request-Method</a></code>
                header or if <a href="#header-parsing-failed" title="header parsing failed">parsing failed</a>,
                do not set any additional headers and terminate this set of steps. The
                request is outside the scope of this specification.</p>
        </li>

        <li>
            <p>Let <var title="">header field-names</var> be the values as result of
                <a href="#header-parsing" title="header parsing">parsing</a> the
                <code title="http-access-control-request-headers"><a href="#http-access-control-request-headers">Access-Control-Request-Headers</a></code>
                headers.</p>

            <p>If there are no
                <code title="http-access-control-request-headers"><a href="#http-access-control-request-headers">Access-Control-Request-Headers</a></code>
                headers let <var title="">header field-names</var> be the empty list.

            <p>If <a href="#header-parsing-failed" title="header parsing failed">parsing failed</a> do not
                set any additional headers and terminate this set of steps. The request
                is outside the scope of this specification.</p>
        </li>

        <li>
            <p>If <var title="">method</var> is not a <a href="#case-sensitive">case-sensitive</a>
                match for any of the values in <a href="#list-of-methods">list of methods</a> do not set
                any additional headers and terminate this set of steps.</p>

            <p class="note">Always matching is acceptable since the
                <a href="#list-of-methods">list of methods</a> can be unbounded.</p>
        </li>

        <li>
            <p>If any of the <var title="">header field-names</var> is not a
                <a href="#ascii-case-insensitive">ASCII case-insensitive</a> match for any of the values in
                <a href="#list-of-headers">list of headers</a> do not set any additional headers and
                terminate this set of steps.</p>

            <p class="note">Always matching is acceptable since the
                <a href="#list-of-headers">list of headers</a> can be unbounded.</p>
        </li>

        <li>
            <p>If the resource <a href="#supports-credentials">supports credentials</a> add a single
                <code title="http-access-control-allow-origin"><a href="#http-access-control-allow-origin">Access-Control-Allow-Origin</a></code>
                header, with the value of the <code title="http-origin"><a href="#http-origin">Origin</a></code>
                header as value, and add a single
                <code title="http-access-control-allow-credentials"><a href="#http-access-control-allow-credentials">Access-Control-Allow-Credentials</a></code>
                header with the <a href="#case-sensitive">case-sensitive</a> string
                "<code title="">true</code>" as value.</p>

            <p>Otherwise, add a single
                <code title="http-access-control-allow-origin"><a href="#http-access-control-allow-origin">Access-Control-Allow-Origin</a></code>
                header, with either the value of the
                <code title="http-origin"><a href="#http-origin">Origin</a></code> header or the string
                "<code title="">*</code>" as value.</p>

            <p class="note">The string "<code title="">*</code>" cannot be used for a
                resource that <a href="#supports-credentials">supports credentials</a>.</p>
        </li>

        <li><p>Optionally add a single
            <code title="http-access-control-max-age"><a href="#http-access-control-max-age">Access-Control-Max-Age</a></code>
            header with as value the amount of seconds the user agent is allowed to
            cache the result of the request.</li>
        <!-- there is no limit -->

        <li>
            <p>If <var title="">method</var> is a <a href="#simple-method">simple method</a>
                this step may be skipped.</p>

            <p>Add one or more
                <code title="http-access-control-allow-methods"><a href="#http-access-control-allow-methods">Access-Control-Allow-Methods</a></code>
                headers consisting of (a subset of) the
                <a href="#list-of-methods">list of methods</a>.</p>

            <p class="note">If a method is a <a href="#simple-method">simple method</a> it does not
                need to be listed, but this is not prohibited.</p>

            <p class="note">Since the <a href="#list-of-methods">list of methods</a> can be unbounded,
                simply returning the method indicated by
                <a href="#http-access-control-request-method">Access-Control-Request-Method</a> (if supported)
                can be enough.</p>
        </li>

        <li>
            <p>If each of the <var title="">header field-names</var> is a
                <a href="#simple-header">simple header</a> and none is <code>Content-Type</code>,
                this step may be skipped.</p>

            <p>Add one or more
                <code title="http-access-control-allow-headers"><a href="#http-access-control-allow-headers">Access-Control-Allow-Headers</a></code>
                headers consisting of (a subset of) the
                <a href="#list-of-headers">list of headers</a>.</p>

            <p class="note">If a header field name is a <a href="#simple-header">simple header</a> and
                is not <code>Content-Type</code>, it is not required to be listed.
                <code>Content-Type</code> is to be listed as only a subset of its values
                makes it qualify as <a href="#simple-header">simple header</a>.</p>

            <p class="note">Since the <a href="#list-of-headers">list of headers</a> can be unbounded,
                simply returning supported headers from <a href="#http-access-control-allow-headers">Access-Control-Allow-Headers</a> can be enough.</p>
        </li>
    </ol>


    <h3 id="resource-security"><span class="secno">6.3 </span>Security</h3>

    <p><em>This section is non-normative.</em></p>

    <p>Resource authors are strongly encouraged to ensure that requests using
        safe methods, e.g. <code>GET</code> or <code>OPTIONS</code>, have no side
        effects so potential attackers cannot modify the user's data easily. If
        resources are set up like this, attackers would effectively have to be on
        the <a href="#list-of-origins">list of origins</a> to do harm.</p>

    <p>In addition to checking the <code title="http-origin"><a href="#http-origin">Origin</a></code>
        header, resource authors are strongly encouraged to also check the
        <code>Host</code> header. That is, make sure that the host name provided
        by that header matches the host name of the server on which the resource
        resides. This will provide protection against DNS rebinding attacks.</p>

    <p>To provide integrity protection of resource sharing policy statements
        usage of SSL/TLS is encouraged.</p>

    <h3 id="resource-implementation"><span class="secno">6.4 </span>Implementation Considerations</h3>

    <p><em>This section is non-normative.</em></p>

    <p>Resources that wish to enable themselves to be shared with multiple
        <code>Origins</code> but do not respond uniformly with <code>"*"</code>
        must in practice generate the <code>Access-Control-Allow-Origin</code>
        header dynamically in response to every request they wish
        to allow.  As a consequence, authors of such resources should send a
        <code>Vary: Origin</code> HTTP header or provide other appropriate control
        directives to prevent caching of such responses, which may be inaccurate
        if re-used across-origins.</p>


    <h2 id="user-agent-processing-model"><span class="secno">7 </span>User Agent Processing Model</h2>

    <p>This section describes the processing models that user agents have to
        implement.</p>

    <p>The processing models in this sections need to be referenced by a
        CORS API specification that defines when the algorithm is invoked and how
        the return values are to be handled. The processing models are not
        suitable for standalone use.</p>


    <h3 id="cross-origin-request-0"><span class="secno">7.1 </span>Cross-Origin Request</h3>

    <p>The <dfn id="cross-origin-request">cross-origin request</dfn>
        algorithm takes the following parameters:

        <dl>
            <dt><dfn id="request-url">request URL</dfn></dt>
            <dd>
    <p>The <a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/urls.html#url">URL</a> to be
        <a class="external" href="http://www.w3.org/TR/html5/infrastructure.html#fetching-resources" title="fetching-resources">fetched</a>.</p>

    <p class="note">The <a href="#request-url">request URL</a> is modified in face of
        redirects.</p>
    </dd>

    <dt><dfn id="request-method">request method</dfn></dt>
    <dd><p>The method for the request. <code>GET</code>, unless explicitly
        set.</dd>

    <dt><dfn id="author-request-headers">author request headers</dfn></dt>
    <dd><p>A list of headers set by authors for the request. Empty, unless
        explicitly set.</dd>

    <dt><dfn id="request-entity-body">request entity body</dfn></dt>
    <dd><p>The entity body for the request. Missing, unless explicitly
        set.</dd>

    <dt><dfn id="source-origin">source origin</dfn></dt>
    <dd>
        <p>The <a class="external" href="http://tools.ietf.org/html/rfc6454#section-4">origin</a> of the request.</p>
        <p class="note">Due to the specifics of some APIs this cannot be defined
            in a generic way and therefore it has to be provided as argument.</p>
    </dd>

    <dt><dfn id="referrer-source">referrer source</dfn></dt>
    <dd>
        <p>Either a <code class="external"><a href="http://dom.spec.whatwg.org/#document">Document</a></code> or
            <a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/urls.html#url">URL</a>. Used to determine the
            <code title="http-referer">Referer</code> header.
    </dd>


    <dt><dfn id="manual-redirect-flag">manual redirect flag</dfn></dt>
    <dd><p>Set when redirects are <em>not</em> to be automatically followed.

    <dt><dfn id="omit-credentials-flag">omit credentials flag</dfn></dt>
    <dd><p>Set when <a href="#user-credentials">user credentials</a> are to be excluded in the
        request and when cookies are to be ignored in its response.

    <dt><dfn id="force-preflight-flag">force preflight flag</dfn></dt>
    <dd><p>Set when a <a href="#preflight-request">preflight request</a> is required.
        </dl>

        <p>The <a href="#cross-origin-request">cross-origin request</a> algorithm can be used by
            CORS API specifications who wish to allow cross-origin requests for the
            network APIs they define.</p>

        <p class="note">CORS API specifications are free to limit the abilities of
            a <a href="#cross-origin-request">cross-origin request</a>. E.g., the
            <a href="#omit-credentials-flag">omit credentials flag</a> could always be set.

        <p>When the <a href="#cross-origin-request">cross-origin request</a> algorithm is invoked,
            these steps must be followed:</p>

        <ol>
            <li>
                <p>If for some reason the user agent does not want to make the request
                    terminate this algorithm and set the
                    <a href="#cross-origin-request-status">cross-origin request status</a> to <i>network error</i>.</p>

                <p class="note">The <a href="#request-url">request URL</a> could have been blacklisted
                    by the user in some fashion.</p>
            </li>

            <li>
                <p>If the following conditions are true, follow the
                    <a href="#simple-cross-origin-request">simple cross-origin request</a> algorithm:

                    <ul>
                        <li><p>The <a href="#request-method">request method</a> is a
                <a href="#simple-method">simple method</a> and the <a href="#force-preflight-flag">force preflight flag</a> is
                unset.

            <li><p>Each of the <a href="#author-request-headers">author request headers</a> is a
                <a href="#simple-header">simple header</a> or <a href="#author-request-headers">author request headers</a> is
                empty.</li>
            </ul>
            </li>

            <li><p>Otherwise, follow the
                <a href="#cross-origin-request-with-preflight">cross-origin request with preflight</a> algorithm.</li>
        </ol>

        <p class="note">Cross-origin requests using a method that is
            <a href="#simple-method" title="simple method">simple</a> with
            <a href="#author-request-headers">author request headers</a> that are not
            <a href="#simple-header" title="simple header">simple</a> will have a
            <a href="#preflight-request">preflight request</a> to ensure that the resource can handle
            those headers. (Similarly to requests using a method that is not a
            <a href="#simple-method">simple method</a>.)</p>


        <h4 id="handling-a-response-to-a-cross-origin-request"><span class="secno">7.1.1 </span>Handling a Response to a Cross-Origin Request</h4>

        <p>User agents must filter out all response headers
            other than those that are a <a href="#simple-response-header">simple response header</a> or of
            which the field name is an <a href="#ascii-case-insensitive">ASCII case-insensitive</a> match for
            one of the values of the
            <code title="http-access-control-expose-headers"><a href="#http-access-control-expose-headers">Access-Control-Expose-Headers</a></code>
            headers (if any), before exposing response headers to APIs defined in
            CORS API specifications.</p>

        <p class="note">The
            <code class="external" title="dom-XMLHttpRequest-getResponseHeader"><a href="http://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html#dom-xmlhttprequest-getresponseheader">getResponseHeader()</a></code>
            method of <code class="external"><a href="http://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html#xmlhttprequest">XMLHttpRequest</a></code> will therefore
            not expose any header not indicated above.</p>


        <h4 id="cross-origin-request-status-0"><span class="secno">7.1.2 </span>Cross-Origin Request Status</h4>

        <p>Each <a href="#cross-origin-request">cross-origin request</a> has an associated
            <dfn id="cross-origin-request-status">cross-origin request status</dfn>
            that CORS API specifications that enable an API to make
            <a href="#cross-origin-request" title="cross-origin request">cross-origin requests</a> can hook
            into. It can take at most two distinct values over the course of a
            <a href="#cross-origin-request">cross-origin request</a>. The values are:</p>

        <dl>
    <dt><i>preflight complete</i></dt>
    <dd>The user agent is about to make the <a href="#actual-request">actual request</a>.</dd>

    <dt><i>success</i>
    <dd>The resource can be shared.</dd>

    <dt><i>abort error</i>
    <dd>The user aborted the request.</dd>

    <dt><i>network error</i>
    <dd>The resource cannot be shared. Also used when a DNS error, TLS
        negotiation failure, or other type of network error occurs.
   <span class="note">This does not include HTTP responses that indicate some
   type of error, such as HTTP status code 410.</span>
        <!-- shared with XMLHttpRequest -->
        </dl>


        <h4 id="source-origin-0"><span class="secno">7.1.3 </span>Source Origin</h4>

        <p>The <a href="#source-origin">source origin</a> is the initial
            <a class="external" href="http://tools.ietf.org/html/rfc6454#section-4">origin</a> that user agents must use for
            the <code title="http-origin"><a href="#http-origin">Origin</a></code> header. It can be modified
            during the <a href="#redirect-steps">redirect steps</a>.</p>


        <h4 id="simple-cross-origin-request-0"><span class="secno">7.1.4 </span>Simple Cross-Origin Request</h4>

        <p>The steps below describe what user agents must do
            for a
            <dfn id="simple-cross-origin-request">simple cross-origin request</dfn>:</p>

        <ol>
            <li>
                <p>Apply the <a href="#make-a-request-steps">make a request steps</a> and observe the
                    <i>request rules</i> below while making the request.</p>

                <dl class="switch">
    <dt>If the <a href="#manual-redirect-flag">manual redirect flag</a> is unset and the response
        has an HTTP status code of 301, 302, 303, 307, or 308</dt>
    <dd><p>Apply the <a href="#redirect-steps">redirect steps</a>.</dd>

    <dt>If the end user cancels the request</dt>
    <dd><p>Apply the <a href="#abort-steps">abort steps</a>.</dd>

    <dt>If there is a network error</dt>
    <dd>
        <p>In case of DNS errors, TLS negotiation failure, or other type of
            network errors, apply the <a href="#network-error-steps">network error steps</a>. Do not
            request any kind of end user interaction.</p>

        <p class="note">This does not include HTTP responses that indicate
            some type of error, such as HTTP status code 410.</p>
    </dd>

    <dt>Otherwise</dt>
    <dd><p>Perform a <a href="#resource-sharing-check">resource sharing check</a>. If it returns
        fail, apply the <a href="#network-error-steps">network error steps</a>. Otherwise, if it
        returns pass, terminate this algorithm and set the
        <a href="#cross-origin-request-status">cross-origin request status</a> to <i>success</i>. Do not
        actually terminate the request.</dd>
    </dl>
</li>
</ol>


<h4 id="cross-origin-request-with-preflight-0"><span class="secno">7.1.5 </span>Cross-Origin Request with Preflight</h4>

<p>To protect resources against cross-origin requests that could not
    originate from certain user agents before this specification existed a
    <a href="#preflight-request">preflight request</a> is made to ensure that the resource is
    aware of this specification. The result of this request is stored in a
    <a href="#preflight-result-cache">preflight result cache</a>.</p>

<p>The steps below describe what user agents must do
    for a
    <dfn id="cross-origin-request-with-preflight">cross-origin request with preflight</dfn>.
    This is a request to a non same-origin URL that first needs to be
    authorized using either a <a href="#preflight-result-cache">preflight result cache</a> entry or a
    <a href="#preflight-request">preflight request</a>.</p>

<ol>
    <li>
        <p>Go to the next step if the following conditions are true:

            <ul>
                <li>
        <p>For <a href="#request-method">request method</a> there either is a
            <a href="#preflight-result-cache-method-match">method cache match</a> or it is a
            <a href="#simple-method">simple method</a> and the <a href="#force-preflight-flag">force preflight flag</a>
            is unset.

    <li>
        <p>For every header of <a href="#author-request-headers">author request headers</a>
            there either is a <a href="#preflight-result-cache-header-match">header cache match</a> for the field name
            or it is a <a href="#simple-header">simple header</a>.</p>
    </li>
    </ul>


    <!-- the preflight request -->
    <p>Otherwise, make a
        <dfn id="preflight-request">preflight request</dfn>.
        <a class="external" href="http://www.w3.org/TR/html5/infrastructure.html#fetching-resources">Fetch</a> the <a href="#request-url">request URL</a>
        from <i title="">origin</i> <a href="#source-origin">source origin</a> using
        <a href="#referrer-source">referrer source</a> as <i title="">override referrer source</i>
        with the <i title="">manual redirect flag</i> and the
        <i title="">block cookies flag</i> set, using the method
        <code>OPTIONS</code>, and with the following additional constraints:</p>

    <ul>
        <li><p>Include an
            <code title="http-access-control-request-method"><a href="#http-access-control-request-method">Access-Control-Request-Method</a></code>
            header with as header field value the <a href="#request-method">request method</a> (even
            when that is a <a href="#simple-method">simple method</a>).</li>

        <li><p>If <a href="#author-request-headers">author request headers</a> is not empty include an
            <code title="http-access-control-request-headers"><a href="#http-access-control-request-headers">Access-Control-Request-Headers</a></code>
            header with as header field value a comma-separated list of the header
            field names from <a href="#author-request-headers">author request headers</a> in lexicographical
            order, each <a href="#converted-to-ascii-lowercase">converted to ASCII lowercase</a> (even when one or
            more are a <a href="#simple-header">simple header</a>).</li>

        <li><p>Exclude the <a href="#author-request-headers">author request headers</a>.</li>

        <li><p>Exclude <a href="#user-credentials">user credentials</a>.</li>

        <li><p>Exclude the <a href="#request-entity-body">request entity body</a>.</li>
    </ul>

    <p>The following <i>request rules</i> are to be observed while making
        the <a href="#preflight-request">preflight request</a>:</p>

    <dl class="switch">
        <dt>If the end user cancels the request</dt>
        <dd><p>Apply the <a href="#abort-steps">abort steps</a>.</dd>

        <dt>If the response has an HTTP status code that is not in the 2xx range</dt>
        <dd>
            <p>Apply the <a href="#network-error-steps">network error steps</a>.</p>

            <p class="note">The <a href="#cache-and-network-error-steps">cache and network error steps</a> are not
                used here as this is about an actual network error.</p>
        </dd>

        <dt>If there is a network error</dt>
        <dd>
            <p>In case of DNS errors, TLS negotiation failure, or other type of
                network errors, apply the <a href="#network-error-steps">network error steps</a>. Do not
                request any kind of end user interaction.</p>

            <p class="note">This does not include HTTP responses that indicate
                some type of error, such as HTTP status code 410.</p>

            <p class="note">The <a href="#cache-and-network-error-steps">cache and network error steps</a> are not
                used here as this is about an actual network error.</p>
        </dd>
        <dt>Otherwise (the HTTP status code is in the 2xx range)</dt>
        <dd>
            <ol>
                <li><p>If the <a href="#resource-sharing-check">resource sharing check</a> returns fail,
                    apply the <a href="#cache-and-network-error-steps">cache and network error steps</a>.</li>

                <li><p>Let <var title="">methods</var> be the empty list.</li>

                <li>
                    <p>If there are one or more
                        <code title="http-access-control-allow-methods"><a href="#http-access-control-allow-methods">Access-Control-Allow-Methods</a></code>
                        headers let <var title="">methods</var> be the values as result of
                        <a href="#header-parsing" title="header parsing">parsing</a> the headers.</p>

                    <p>If <a href="#header-parsing-failed" title="header parsing failed">parsing failed</a>
                        apply the <a href="#cache-and-network-error-steps">cache and network error steps</a>.</p>
                </li>

                <li>
                    <p>If <var title="">methods</var> is still the empty list and the
                        <a href="#force-preflight-flag">force preflight flag</a> is set, append the
                        <a href="#request-method">request method</a> to <var title="">methods</var>.

                    <p class="note">This ensures that
                        <a href="#preflight-request" title="preflight request">preflight requests</a> that
                        happened solely because of the <a href="#force-preflight-flag">force preflight flag</a> are
                        cached too.

                <li><p>Let <var title="">headers</var> be the empty list.</li>

                <li>
                    <p>If there are one or more
                        <code title="http-access-control-allow-headers"><a href="#http-access-control-allow-headers">Access-Control-Allow-Headers</a></code>
                        headers let <var title="">headers</var> be the values as result of
                        <a href="#header-parsing" title="header parsing">parsing</a> the headers.</p>

                    <p>If <a href="#header-parsing-failed" title="header parsing failed">parsing failed</a>
                        apply the <a href="#cache-and-network-error-steps">cache and network error steps</a>.</p>
                </li>

                <li><p>If <a href="#request-method">request method</a> is not a
                    <a href="#case-sensitive">case-sensitive</a> match for any method in
                    <var title="">methods</var> and is not a <a href="#simple-method">simple method</a>,
                    apply the <a href="#cache-and-network-error-steps">cache and network error steps</a>.</li>

                <li><p>If the field name of each header in
                    <a href="#author-request-headers">author request headers</a> is not an
                    <a href="#ascii-case-insensitive">ASCII case-insensitive</a> match for one of the
                    header field names in <var title="">headers</var> and the header is
                    not a <a href="#simple-header">simple header</a>, apply the
                    <a href="#cache-and-network-error-steps">cache and network error steps</a>.</li>

                <li><p>If for some reason the user agent is unable to provide a
                    <a href="#preflight-result-cache">preflight result cache</a> (e.g. because of limited disk
                    space) go to the next step in the overall set of steps (i.e. the
                    <a href="#actual-request">actual request</a>).</li>

                <li>
                    <p>If there is a single
                        <code title="http-access-control-max-age"><a href="#http-access-control-max-age">Access-Control-Max-Age</a></code>
                        header, <a href="#header-parsing" title="header parsing">parse</a> it and let
                        <var title="">max-age</var> be the resulting value.</p>

                    <p>If there is no such header, there is more than one such header,
                        or <a href="#header-parsing-failed" title="header parsing failed">parsing failed</a>, let
                        <var title="">max-age</var> be a value at the discretion of the user
                        agent (zero is allowed).</p>

                    <p>If the user agent imposes a limit on the
                        <a href="#cache-max-age" title="cache-max-age">max-age</a> field value and
                        <var title="">max-age</var> is greater than that limit let
                        <var title="">max-age</var> be the limit.</p>
                </li>

                <li>
                    <p>For each method in <var title="">methods</var> for which there is
                        a <a href="#preflight-result-cache-method-match">method cache match</a> set the
                        <a href="#cache-max-age" title="cache-max-age">max-age</a> field value of the
                        matching entry to <var title="">max-age</var>.</p>

                    <p>For each method in <var title="">methods</var> for which there is
                        <em>no</em> <a href="#preflight-result-cache-method-match">method cache match</a> create a new entry in
                        the <a href="#preflight-result-cache">preflight result cache</a> with the various fields set
                        as follows:</p>

                    <dl>
        <dt><a href="#cache-origin" title="cache-origin">origin</a></dt>
        <dd>The <a href="#source-origin">source origin</a>.</dd>

        <dt><a href="#cache-url" title="cache-url">url</a></dt>
        <dd>The <a href="#request-url">request URL</a>.</dd>

        <dt><a href="#cache-max-age" title="cache-max-age">max-age</a></dt>
        <dd>The <var title="">max-age</var>.</dd>

        <dt><a href="#cache-credentials" title="cache-credentials">credentials</a></dt>
        <dd>False if the <a href="#omit-credentials-flag">omit credentials flag</a> is set, or true
            otherwise.

        <dt><a href="#cache-method" title="cache-method">method</a></dt>
        <dd>The given method.</dd>

        <dt><a href="#cache-header" title="cache-header">header</a></dt>
        <dd>Empty.</dd>
    </dl>
    </li>

    <li>
        <p>For each header in <var title="">headers</var> for which there is
            a <a href="#preflight-result-cache-header-match">header cache match</a> set the
            <a href="#cache-max-age" title="cache-max-age">max-age</a> field value of the
            matching entry to <var title="">max-age</var>.</p>

        <p>For each header in <var title="">headers</var> for which there is
            <em>no</em> <a href="#preflight-result-cache-header-match">header cache match</a> create a new entry in
            the <a href="#preflight-result-cache">preflight result cache</a> with the various fields set
            as follows:</p>

        <dl>
            <dt><a href="#cache-origin" title="cache-origin">origin</a></dt>
            <dd>The <a href="#source-origin">source origin</a>.</dd>

            <dt><a href="#cache-url" title="cache-url">url</a></dt>
            <dd>The <a href="#request-url">request URL</a>.</dd>

            <dt><a href="#cache-max-age" title="cache-max-age">max-age</a></dt>
            <dd>The <var title="">max-age</var>.</dd>

            <dt><a href="#cache-credentials" title="cache-credentials">credentials</a></dt>
            <dd>False if the <a href="#omit-credentials-flag">omit credentials flag</a> is set, or true
                otherwise.

            <dt><a href="#cache-method" title="cache-method">method</a></dt>
            <dd>Empty.</dd>

            <dt><a href="#cache-header" title="cache-header">header</a></dt>
            <dd>The given header.</dd>
        </dl>
    </li>
</ol>
</dd>
</dl>
</li>

<li><p>Set the <a href="#cross-origin-request-status">cross-origin request status</a> to
    <i>preflight complete</i>.</li>

<!-- the actual request -->
<li>
    <p>This is the <dfn id="actual-request">actual request</dfn>. Apply the
        <a href="#make-a-request-steps">make a request steps</a> and observe the <i>request rules</i>
        below while making the request.</p>

    <dl class="switch">
        <dt>If the response has an HTTP status code of 301, 302, 303, 307, or 308</dt>

        <dd><p>Apply the <a href="#cache-and-network-error-steps">cache and network error steps</a>.</dd>

        <dt>If the end user cancels the request</dt>

        <dd><p>Apply the <a href="#abort-steps">abort steps</a>.</dd>

        <dt>If there is a network error</dt>
        <dd>
            <p>In case of DNS errors, TLS negotiation failure, or other type of
                network errors, apply the <a href="#network-error-steps">network error steps</a>. Do not
                request any kind of end user interaction.</p>

            <p class="note">This does not include HTTP responses that indicate
                some type of error, such as HTTP status code 410.</p>
        </dd>


        <dt>Otherwise</dt>

        <dd><p>Perform a <a href="#resource-sharing-check">resource sharing check</a>. If it returns
            fail, apply the <a href="#cache-and-network-error-steps">cache and network error steps</a>. Otherwise,
            if it returns pass, terminate this algorithm and set the
            <a href="#cross-origin-request-status">cross-origin request status</a> to <i>success</i>. Do not
            actually terminate the request.</dd>
    </dl>
    </ol>

    <div class="example">
        <p>Consider the following scenario:</p>

        <ol>
            <li><p>The user agent gets the request from an API, such as
                <code class="external"><a href="http://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html#xmlhttprequest">XMLHttpRequest</a></code>, to perform a
                cross-origin request using the custom <code>XMODIFY</code> method from
                <a href="#source-origin">source origin</a> <code>http://example.org</code> to
                <code>http://blog.example/entries/hello-world</code>.

            <li><p>The user agent performs a <a href="#preflight-request">preflight request</a> using
                the <code>OPTIONS</code> method to
                <code>http://blog.example/entries/hello-world</code> and includes the
                <code title="http-origin"><a href="#http-origin">Origin</a></code> and
                <code title="http-access-control-request-method"><a href="#http-access-control-request-method">Access-Control-Request-Method</a></code>
                headers with the appropriate values.</li>

            <li>
                <p>The response to that request includes the following headers:</p>
     <pre>Access-Control-Allow-Origin: http://example.org
Access-Control-Max-Age: 2520
Access-Control-Allow-Methods: PUT, DELETE, XMODIFY</pre>

            <li><p>The user agent then performs the desired request using the
                <code>XMODIFY</code> method to
                <code>http://blog.example/entries/hello-world</code> as this was allowed
                by the resource. In addition, for the coming forty-two minutes, no
                <a href="#preflight-request">preflight request</a> will be needed.
        </ol>
    </div>


    <h4 id="preflight-result-cache-0"><span class="secno">7.1.6 </span>Preflight Result Cache</h4>

    <p>As mentioned, a <a href="#cross-origin-request-with-preflight">cross-origin request with preflight</a>
        uses a <dfn id="preflight-result-cache">preflight result cache</dfn>. This
        cache consists of a set of entries. Each entry consists of the following
        fields:</p>

    <dl>
        <dt><dfn id="cache-origin" title="cache-origin">origin</dfn></dt>
        <dd>Holds the <a href="#source-origin">source origin</a>.</dd>

        <dt><dfn id="cache-url" title="cache-url">url</dfn></dt>
        <dd>Holds the <a href="#request-url">request URL</a>.</dd>

        <dt><dfn id="cache-max-age" title="cache-max-age">max-age</dfn></dt>
        <dd>Holds the
            <code title="http-access-control-max-age"><a href="#http-access-control-max-age">Access-Control-Max-Age</a></code>
            header value.</dd>

        <dt><dfn id="cache-credentials" title="cache-credentials">credentials</dfn></dt>
        <dd>False if the <a href="#omit-credentials-flag">omit credentials flag</a> is set, or true
            otherwise.

        <dt><dfn id="cache-method" title="cache-method">method</dfn></dt>
        <dd>Empty if <a href="#cache-header" title="cache-header">header</a> is not empty;
            otherwise one of the values from the
            <code title="http-access-control-allow-methods"><a href="#http-access-control-allow-methods">Access-Control-Allow-Methods</a></code>
            headers.</dd>

        <dt><dfn id="cache-header" title="cache-header">header</dfn></dt>
        <dd>Empty if <a href="#cache-method" title="cache-method">method</a> is not empty;
            otherwise one of the values from the
            <code title="http-access-control-allow-headers"><a href="#http-access-control-allow-headers">Access-Control-Allow-Headers</a></code>
            headers.</dd>
    </dl>

    <p class="note">To be clear, the <a href="#cache-method" title="cache-method">method</a>
        and <a href="#cache-header" title="cache-header">header</a> fields are mutually
        exclusive. When one of them is empty the other is non-empty.</p>

    <p class="note">The primary key of an entry consists of all fields
        excluding the <a href="#cache-max-age" title="cache-max-age">max-age</a> field.</p>

    <p>Entries must be removed when the time specified in
        the <a href="#cache-max-age" title="cache-max-age">max-age</a> field has passed since
        storing the entry. Entries can also be added and removed per the
        algorithms below. They are added and removed in such a way that there can
        never be duplicate items in the cache.</p>

    <p>User agents may clear cache entries before the
        time specified in the <a href="#cache-max-age" title="cache-max-age">max-age</a> field has
        passed.</p>

    <p class="note">Although this effectively makes the
        <a href="#preflight-result-cache">preflight result cache</a> optional, user agents are strongly
        encouraged to support it.</p>


    <h4 id="generic-cross-origin-request-algorithms"><span class="secno">7.1.7 </span>Generic Cross-Origin Request Algorithms</h4>

    <p>The variables used in the generic set of steps are part of the
        algorithms that invoke these set of steps.</p>

    <hr>

    <p>Whenever the <dfn id="make-a-request-steps">make a request steps</dfn> are applied,
        <a class="external" href="http://www.w3.org/TR/html5/infrastructure.html#fetching-resources">fetch</a> the <a href="#request-url">request URL</a> from
        <i title="">origin</i> <a href="#source-origin">source origin</a> using
        <a href="#referrer-source">referrer source</a> as <i title="">override referrer source</i> with
        the <i title="">manual redirect flag</i> set, and the
        <i title="">block cookies flag</i> set if the
        <a href="#omit-credentials-flag">omit credentials flag</a> is set. Use method
        <a href="#request-method">request method</a>, entity body <a href="#request-entity-body">request entity body</a>,
        including the <a href="#author-request-headers">author request headers</a>, and include
        <a href="#user-credentials">user credentials</a> if the <a href="#omit-credentials-flag">omit credentials flag</a> is unset.

    <p>Whenever the <dfn id="redirect-steps">redirect steps</dfn> are applied,
        follow this set of steps:</p>

    <ol>
        <li><p>Let <var>original URL</var> be the <a href="#request-url">request URL</a>.

        <li><p>Let <a href="#request-url">request URL</a> be the
            <a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/urls.html#url">URL</a> conveyed by
            the <code>Location</code> header in the redirect response.</li>

        <li><p>If the <a href="#request-url">request URL</a> &lt;scheme&gt; is not supported,
            infinite loop precautions are violated, or the user agent does not wish
            to make the new request for some other reason, apply the
            <a href="#network-error-steps">network error steps</a>.

        <li><p>If the <a href="#request-url">request URL</a> contains the
            <code class="external"><a href="http://tools.ietf.org/html/rfc2616/#section-3.2.1">userinfo</a></code> production apply the
            <a href="#network-error-steps">network error steps</a>.</li>

        <li><p>If the <a href="#resource-sharing-check">resource sharing check</a> for the current
            resource returns fail, apply the <a href="#network-error-steps">network error steps</a>.
            <!--This prevents intranet data leakage.-->

        <li><p>If the <a href="#request-url">request URL</a>
            <a class="external" href="http://tools.ietf.org/html/rfc6454#section-4">origin</a> is not
            <a class="external" href="http://tools.ietf.org/html/rfc6454#section-5">same origin</a> with the
            <var>original URL</var> <a class="external" href="http://tools.ietf.org/html/rfc6454#section-4">origin</a>, set
            <a href="#source-origin">source origin</a> to a globally unique identifier (becomes
            "<code title="">null</code>" when transmitted).

        <li><p>Transparently follow the redirect while observing the set of
            <i>request rules</i>.
    </ol>

    <hr>

    <p>Whenever the <dfn id="abort-steps">abort steps</dfn> are applied,
        terminate the algorithm that invoked this set of steps and set the
        <a href="#cross-origin-request-status">cross-origin request status</a> to <i>abort error</i>.</p>

    <hr>

    <p>Whenever the <dfn id="network-error-steps">network error steps</dfn>
        are applied, terminate the algorithm that invoked this set of steps and
        set the <a href="#cross-origin-request-status">cross-origin request status</a> to
        <i>network error</i>.</p>

    <p class="note">This has no effect on setting of
        <a href="#user-credentials">user credentials</a>. I.e. if the <i title="">block cookies flag</i>
        is unset, cookies will be set by the response.

    <p>Whenever the
        <dfn id="cache-and-network-error-steps">cache and network error steps</dfn>
        are applied, follow these steps:</p>

    <ol>
        <li><p>Remove the entries in the <a href="#preflight-result-cache">preflight result cache</a>
            where <a href="#cache-origin" title="cache-origin">origin</a> field value is a
            <a href="#case-sensitive">case-sensitive</a> match for <a href="#source-origin">source origin</a>
            and <a href="#cache-url" title="cache-url">url</a> field value is a
            <a href="#case-sensitive">case-sensitive</a> match for <a href="#request-url">request URL</a>.</li>

        <li><p>Apply the <a href="#network-error-steps">network error steps</a> acting as if the
            algorithm that invoked the <a href="#cache-and-network-error-steps">cache and network error steps</a>
            invoked the <a href="#network-error-steps">network error steps</a> instead.</p>
    </ol>

    <hr>

    <p>There is a
        <dfn id="preflight-result-cache-match">cache match</dfn>
        when there is a cache entry in the <a href="#preflight-result-cache">preflight result cache</a>
        for which the following is true:</p>

    <ul>
        <li><p>The <a href="#cache-origin" title="cache-origin">origin</a> field value is a
            <a href="#case-sensitive">case-sensitive</a> match for
            <a href="#source-origin">source origin</a>.</li>

        <li><p>The <a href="#cache-url" title="cache-url">url</a> field value is a
            <a href="#case-sensitive">case-sensitive</a> match for
            <a href="#request-url">request URL</a>.</li>

        <li><p>The <a href="#cache-credentials" title="cache-credentials">credentials</a> field value
            is true and the <a href="#omit-credentials-flag">omit credentials flag</a> is unset, or it is false and
            the <a href="#omit-credentials-flag">omit credentials flag</a> is set.
    </ul>

    <p>There is a
        <dfn id="preflight-result-cache-method-match">method cache match</dfn>
        when there is a cache entry for which there is a <a href="#preflight-result-cache-match">cache match</a>
        and the <a href="#cache-method" title="cache-method">method</a> field value is a
        <a href="#case-sensitive">case-sensitive</a> match for the given method.</p>

    <p>There is a
        <dfn id="preflight-result-cache-header-match">header cache match</dfn>
        when there is a cache entry for which there is a <a href="#preflight-result-cache-match">cache match</a>
        and the <a href="#cache-header" title="cache-header">header</a> field value is an
        <a href="#ascii-case-insensitive">ASCII case-insensitive</a> match for the given header field
        name.</p>


    <h3 id="resource-sharing-check-0"><span class="secno">7.2 </span>Resource Sharing Check</h3>

    <p>The <dfn id="resource-sharing-check">resource sharing check</dfn>
        algorithm for a given resource is as follows:</p>

    <ol>
        <li><p>If the response includes zero or more than one
            <code title="http-access-control-allow-origin"><a href="#http-access-control-allow-origin">Access-Control-Allow-Origin</a></code>
            header values, return fail and terminate this algorithm.</li>

        <li><p>If the
            <code title="http-access-control-allow-origin"><a href="#http-access-control-allow-origin">Access-Control-Allow-Origin</a></code>
            header value is the "<code>*</code>" character and the
            <a href="#omit-credentials-flag">omit credentials flag</a> is set, return pass and terminate this
            algorithm.</li>

        <li><p>If the value of
            <code title="http-access-control-allow-origin"><a href="#http-access-control-allow-origin">Access-Control-Allow-Origin</a></code>
            is not a <a href="#case-sensitive">case-sensitive</a> match for the value of the
            <code title="http-origin"><a href="#http-origin">Origin</a></code> header as defined by its
            specification, return fail and terminate this algorithm.</li>

        <li><p>If the <a href="#omit-credentials-flag">omit credentials flag</a> is unset and the response
            includes zero or more than one
            <code title="http-access-control-allow-credentials"><a href="#http-access-control-allow-credentials">Access-Control-Allow-Credentials</a></code>
            header values, return fail and terminate this algorithm.</li>

        <li><p>If the <a href="#omit-credentials-flag">omit credentials flag</a> is unset and the
            <code title="http-access-control-allow-credentials"><a href="#http-access-control-allow-credentials">Access-Control-Allow-Credentials</a></code>
            header value is not a <a href="#case-sensitive">case-sensitive</a> match for
            "<code>true</code>", return fail and terminate this algorithm.

        <li><p>Return pass.
    </ol>

    <p class="note">The above algorithm also functions when the
        <a class="external" href="http://tools.ietf.org/html/rfc6454#section-6.2">ASCII serialization</a> of an origin is
        the string "<code>null</code>".</p>


    <h3 id="user-agent-security"><span class="secno">7.3 </span>Security</h3>

    <p><em>This section is non-normative.</em></p>

    <p>At various places user agents are allowed to take additional
        precautions. E.g. user agents are allowed to not store cache items, remove
        cache items before they reached their
        <a href="#cache-max-age" title="cache-max-age">max-age</a>, and not connect to certain
        <a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/urls.html#url" title="URL">URLs</a>.</p>

    <p>User agents are encouraged to impose a limit on
        <a href="#cache-max-age" title="cache-max-age">max-age</a> so items cannot stay in the
        <a href="#preflight-result-cache">preflight result cache</a> for unreasonable amounts of time.</p>

    <p>As indicated as the first step of the <a href="#cross-origin-request">cross-origin request</a>
        algorithm and in the <a href="#redirect-steps">redirect steps</a> algorithm user agents
        are allowed to terminate the algorithm and not make a request. This could
        be done because e.g.:</p>

    <ul>
        <li>The origin of the resource blacklisted.</li>
        <li>The origin of the resource is known to be part of an
            intranet.</li>
        <li>The URL &lt;scheme&gt; is not supported.</li>
        <li><code>https</code> to <code>http</code> is not allowed.</li>
        <li><code>https</code> is not allowed because of certificate errors</li>
    </ul>

    <p>User agents are encouraged to apply security decisions on a generic
        level and not just to the resource sharing policy. E.g. if a user agent
        disallows requests from the <code>https</code> to the <code>http</code>
        scheme for a <a href="#cross-origin-request">cross-origin request</a> it is encouraged to do the
        same for the HTML <code>img</code> element.</p>




    <h2 id="cors-api-specification-advice"><span class="secno">8 </span>CORS API Specification Advice</h2>

    <p><em>This section is non-normative.</em></p>

    <p>This specification defines a resource sharing policy that cannot be
        implemented without an API that utilizes it. The specification that
        defines the API that uses the policy is a CORS API specification.</p>

    <p>In case a CORS API specification defines multiple APIs that utilize the
        policy the advice is to be considered separately for each API.</p>


    <h3 id="cors-api-specifiation-request"><span class="secno">8.1 </span>Constructing a Cross-Origin Request</h3>

    <p>For all <a href="#cross-origin">cross-origin</a> requests that APIs can make for
        which the resource sharing policy in this specification is supposed to
        apply, the CORS API specification needs to reference the
        <a href="#cross-origin-request">cross-origin request</a> algorithm and set the following input
        variables appropriately: <a href="#request-url">request URL</a>,
        <a href="#request-method">request method</a>, <a href="#author-request-headers">author request headers</a>,
        <a href="#request-entity-body">request entity body</a>, <a href="#source-origin">source origin</a>,
        <a href="#manual-redirect-flag">manual redirect flag</a>, <a href="#omit-credentials-flag">omit credentials flag</a>,
        and the <a href="#force-preflight-flag">force preflight flag</a>.</p>

    <p>CORS API specifications are allowed to let these input variables be
        controlled by the API, but can also set fixed values.</p>

    <p class="example">A CORS API specification for an API that only allows
        requests using the <code>GET</code> method might set
        <a href="#request-method">request method</a> to <code>GET</code>,
        <a href="#request-entity-body">request entity body</a> to empty, and <a href="#source-origin">source origin</a>
        to some appropriate value and let the other variables be controlled by the
        API.</p>


    <h3 id="cors-api-specification-redirect"><span class="secno">8.2 </span>Dealing with Same Origin to Cross-Origin Redirects</h3>

    <p>Since browsers are based on a
        <a class="external" href="http://tools.ietf.org/html/rfc6454#section-5">same origin</a> security model and the
        policy outlined in this specification is intended for APIs used in
        browsers, it is expected that APIs that will utilize this policy will have
        to handle a <a class="external" href="http://tools.ietf.org/html/rfc6454#section-5">same origin</a> request that
        results in a redirect that is <a href="#cross-origin">cross-origin</a> in a special
        way.</p>

    <p>For APIs that transparently handle redirects CORS API specifications
        are encouraged to handle this scenario transparently as well by "catching"
        the redirect and invoking the <a href="#cross-origin-request">cross-origin request</a> algorithm
        on the (<a href="#cross-origin">cross-origin</a>) redirect URL.</p>

    <p class="note">The XMLHttpRequest specification does this.
        <a class="informative" href="#refsXHR">[XHR]</a>


    <h3 id="cors-api-specification-response"><span class="secno">8.3 </span>Dealing with the
        Cross-Origin Request Status</h3>

    <p>While a <a href="#cross-origin-request">cross-origin request</a> is progressing its
        associated <a href="#cross-origin-request-status">cross-origin request status</a> is updated.
        Depending on the value of the <a href="#cross-origin-request-status">cross-origin request status</a> the
        API is to react in a different way:</p>

    <dl>
        <dt><i>preflight complete</i></dt>
        <dd>
            <p>Features that can only be safely exposed after a
                <a href="#preflight-request">preflight request</a> can now be enabled.</p>

            <p class="note">E.g. upload progress events for
                <code class="external"><a href="http://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html#xmlhttprequest">XMLHttpRequest</a></code>.
        </dd>

        <dt><i>success</i></dt>
        <dd>
            <p>The contents of the response can be shared with the API, including
                headers that have not been filtered out.</p>

            <p class="note">The request itself can still be progressing. I.e. the
                <a href="#cross-origin-request-status">cross-origin request status</a> value does not indicate that
                the request has completed.</p>
        </dd>

        <dt><i>abort error</i></dt>
        <dd><p>Handle analogous to requests where the user aborted the request.
            This can be handled equivalently to how <i>network error</i> is
            handled. Ensure not to reveal any further information about the
            request.</dd>

        <dt><i>network error</i></dt>
        <dd><p>Handle analogous to requests where some kind of error
            occurred. Ensure not the reveal any further information about the
            request.</dd>
    </dl>


    <h3 id="cors-api-specification-security"><span class="secno">8.4 </span>Security</h3>

    <p>Similarly to <a class="external" href="http://tools.ietf.org/html/rfc6454#section-5">same origin</a> requests,
        CORS API specifications are encouraged to properly limit headers, methods,
        and <a href="#user-credentials">user credentials</a> the author can set and get for requests
        that are <a href="#cross-origin">cross-origin</a>.</p>

    <p class="note">Reviewing the XMLHttpRequest specification provides a good
        start for the kind of limitations that are to be imposed.
        <a class="informative" href="#refsXHR">[XHR]</a>

    <p>CORS API specifications also need to ensure not to reveal anything
        until the <a href="#cross-origin-request-status">cross-origin request status</a> is set to
        <i>preflight complete</i> or <i>success</i> to prevent e.g. port
        scanning.</p>

    <p class="note">In XMLHttpRequest progress events are dispatched
        only after the <a href="#cross-origin-request-status">cross-origin request status</a> is set to
        <i>success</i>. Upload progress events are only dispatched once the
        <a href="#cross-origin-request-status">cross-origin request status</a> is <i>preflight complete</i>.</p>



    <h2 class="no-num" id="references">References</h2>
    <div id="anolis-references"><dl><dt id="refsCONFUSED">[CONFUSED]
        <dd>(Non-normative) <cite><a href="http://www.cis.upenn.edu/~KeyKOS/ConfusedDeputy.html">The Confused Deputy</a></cite>, Norm Hardy.

        <dt id="refsCOOKIES">[COOKIES]
        <dd><cite><a href="http://tools.ietf.org/html/rfc6265">HTTP State Management Mechanism</a></cite>, Adam Barth. IETF.

        <dt id="refsCSRF">[CSRF]
        <dd>(Non-normative) <cite><a href="http://marc.info/?l=bugtraq&amp;m=99263135911884&amp;w=2">Cross-Site Request Forgeries</a></cite>, Peter Watkins.

        <dt id="refsEVENTSOURCE">[EVENTSOURCE]
        <dd>(Non-normative) <cite><a href="http://www.w3.org/TR/eventsource/">Server-Sent Events</a></cite>, Ian Hickson. W3C.

        <dt id="refsHTML">[HTML]
        <dd><cite><a href="http://www.w3.org/TR/html5/">HTML5</a></cite>, Berjon, Leithead, Navara, O'Connor, Pfeiffer and Hickson. W3C.

        <dt id="refsHTTP">[HTTP]
        <dd><cite><a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a></cite>, Roy Fielding, James Gettys, Jeffrey Mogul et al.. IETF.

        <dt id="refsHTTP308">[308]
        <dd><cite><a href="https://datatracker.ietf.org/doc/draft-reschke-http-status-308/">The Hypertext Transfer Protocol (HTTP) Status Code 308 (Permanent Redirect)</a></cite>, Julian Reschke. IETF.

        <dt id="refsJSONP">[JSONP]
        <dd>(Non-normative) <cite><a href="http://bob.ippoli.to/archives/2005/12/05/remote-json-jsonp/">JSONP</a></cite>, Bob Ippolito.

        <dt id="refsOAUTH">[OAUTH]
        <dd>(Non-normative) <cite><a href="http://tools.ietf.org/html/rfc5849">The OAuth 1.0 Protocol</a></cite>, Eran Hammer-Lahav. IETF.

        <dt id="refsORIGIN">[ORIGIN]
        <dd><cite><a href="http://tools.ietf.org/html/rfc6454">The Web Origin Concept</a></cite>, Adam Barth. IETF.

        <dt id="refsRFC2119">[RFC2119]
        <dd><cite><a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a></cite>, Scott Bradner. IETF.

        <dt id="refsURI">[URI]
        <dd><cite><a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a></cite>, Tim Berners-Lee, Roy Fielding and Larry Masinter. IETF.

        <dt id="refsXHR">[XHR]
        <dd>(Non-normative) <cite><a href="https://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html">XMLHttpRequest</a></cite>, Anne van Kesteren. W3C.

    </dl></div>


    <h2 class="no-num" id="acknowledgments">Acknowledgments</h2>

    <p><em>This appendix is non-normative.</em></p>

    <p>The editor would like to thank

        Adam Barth,
        Alexey Proskuryakov,
        Arne Johannessen,
        Arthur Barstow,
        Benjamin Hawkes-Lewis,
        Bert Bos,
        Bj&ouml;rn H&ouml;hrmann,
        Boris Zbarsky,
        Brad Hill,
        Cameron McCormack,
        Collin Jackson,
        David H&aring;s&auml;ther,
        David Orchard,
        Dean Jackson,
        Eric Lawrence,
        Frank Ellerman,
        Frederick Hirsch,
        Graham Klyne,
        Hal Lockhart,
        Henri Sivonen,
        Ian Hickson,
        Jesse M. Heines,
        Jonas Sicking,
        Julian Reschke,
        Lachlan Hunt,
        &#21570;&#24247;&#35946; (Kang-Hao Lu),
        Maciej Stachowiak,
        Marc Silbey,
        Marcos Caceres,
        Mark Nottingham,
        Mark S. Miller,
        Martin D&uuml;rst,
        Matt Womer,
        Mhano Harkness,
        Michael Smith,
        Mohamed Zergaoui,
        Nikunj Mehta,
        Odin H&oslash;rthe Omdal,
        Philip J&auml;genstedt,
        Sharath Udupa,
        Simon Pieters,
        Sunava Dutta,
        Surya Ismail,
        Thomas Roessler,
        Tyler Close,
        Jeff Hodges,
        Vladimir Dzhuvinov,
        Wayne Carr, and
        Zhenbin Xu

        for their contributions to this specification.</p>

    <p>Special thanks to Brad Porter, Matt Oshry and R. Auburn, who all helped
        editing earlier versions of this document.</p>